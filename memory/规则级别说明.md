# 记忆库规则级别说明

## 规则层级架构

记忆库采用五级规则体系，从高到低依次为：

### 0. 项目最高规则级别 (Level 0) - 最高优先级
**文件位置**: `项目根目录/README.md`
**作用范围**: 整个项目及所有子模块
**主要内容**:
- 项目级记忆库启用规则
- 全局AI Agent行为规范
- 项目级强制规则
- 团队协作规范

**规则特点**:
- 影响整个项目
- 不可被任何下级规则覆盖
- 定义项目的最高行为准则

### 1. 主规则级别 (Level 1) - 记忆库主规则
**文件位置**: `memory/memory.md`
**作用范围**: 全局记忆策略和核心规则
**主要内容**:
- 项目概述和基本信息
- 核心功能定义
- 技术架构规范
- 全局记忆策略
- 系统级决策记录

**规则特点**:
- 影响整个记忆系统
- 不可被下级规则覆盖
- 定义记忆库的基本行为模式

### 2. 项目规则级别 (Level 2) - 项目级规则
**文件位置**: `memory/rules/project.md`
**作用范围**: 项目级别的通用规则
**主要内容**:
- 项目初始化流程
- 技术栈选择规范
- 项目结构标准
- 开发规范定义
- 代码质量标准

**规则特点**:
- 适用于当前项目
- 可以被个人偏好覆盖
- 定义项目的开发标准

### 3. 个人偏好级别 (Level 3) - 个人级规则
**文件位置**: `memory/preferences/development.md`
**作用范围**: 个人开发习惯和偏好
**主要内容**:
- 开发环境配置
- 个人工具偏好
- 编码风格偏好
- 工作流程习惯
- 个人效率优化

**规则特点**:
- 个人定制化规则
- 可以覆盖项目规则
- 影响个人开发体验

### 4. 模块规则级别 (Level 4) - 功能模块规则
**文件位置**: `memory/[功能模块]/[模块名].md`
**作用范围**: 特定功能模块的规则
**主要内容**:
- 模块特定规范
- 功能使用规则
- 模块内部标准
- 特定场景规则

**规则特点**:
- 模块专用规则
- 最具体的规则级别
- 可以覆盖上级规则

## 规则继承和覆盖机制

### 继承关系
```
项目最高规则 (项目根目录/README.md)
    ↓ 继承
主规则 (memory/memory.md)
    ↓ 继承
项目规则 (memory/rules/project.md)
    ↓ 继承
个人偏好 (memory/preferences/development.md)
    ↓ 继承
模块规则 (memory/[功能模块]/[模块名].md)
```

### 覆盖规则
1. **同级规则**: 后加载的规则覆盖先加载的规则
2. **跨级规则**: 下级规则可以覆盖上级规则
3. **冲突解决**: 以最具体的规则为准
4. **强制规则**: 主规则中的核心策略不可被覆盖

### 规则应用顺序
1. 加载项目最高规则 (项目根目录/README.md)
2. 加载主规则 (memory/memory.md)
3. 加载项目规则 (memory/rules/project.md)
4. 加载个人偏好 (memory/preferences/development.md)
5. 加载相关模块规则
6. 应用覆盖规则
7. 生成最终规则集

## 规则级别使用指南

### 项目最高规则级别使用
- **何时使用**: 定义项目级强制规则
- **如何修改**: 项目负责人修改，影响整个项目
- **修改原则**: 保持项目一致性和团队协作规范

### 主规则级别使用
- **何时使用**: 定义记忆库的核心行为
- **如何修改**: 谨慎修改，影响全局
- **修改原则**: 保持稳定性和一致性

### 项目规则级别使用
- **何时使用**: 定义项目标准
- **如何修改**: 根据项目需求调整
- **修改原则**: 保持项目一致性

### 个人偏好级别使用
- **何时使用**: 个人定制化需求
- **如何修改**: 根据个人习惯调整
- **修改原则**: 提高个人效率

### 模块规则级别使用
- **何时使用**: 特定功能需求
- **如何修改**: 根据模块需求调整
- **修改原则**: 保持模块功能完整

## 规则冲突处理

### 冲突类型
1. **直接冲突**: 同一规则项有不同值
2. **间接冲突**: 规则间存在逻辑矛盾
3. **优先级冲突**: 多个规则都声明优先级

### 冲突解决策略
1. **优先级原则**: 以规则级别优先级为准
2. **具体性原则**: 以更具体的规则为准
3. **时间原则**: 以最新修改的规则为准
4. **人工干预**: 复杂冲突需要人工决策

### 冲突检测机制
1. **规则加载时检测**: 加载时检查规则冲突
2. **运行时检测**: 运行时监控规则应用
3. **定期检查**: 定期检查规则一致性
4. **冲突报告**: 生成冲突报告和建议

## 最佳实践

### 规则设计原则
1. **层次清晰**: 每个级别职责明确
2. **继承合理**: 避免不必要的重复
3. **覆盖适度**: 避免过度覆盖
4. **文档完整**: 规则变更要有文档记录

### 规则维护建议
1. **定期审查**: 定期检查规则有效性
2. **版本控制**: 使用Git管理规则变更
3. **测试验证**: 规则变更后要测试验证
4. **团队协作**: 团队规则变更要协商一致

### 规则优化策略
1. **性能优化**: 避免过于复杂的规则
2. **可读性优化**: 保持规则的可读性
3. **可维护性优化**: 保持规则的可维护性
4. **扩展性优化**: 保持规则的扩展性

## 联系方式
- **项目路径**: C:\Users\admin\1\test1
- **记忆文件**: memory/memory.md
- **最后更新**: 2025-09-27
